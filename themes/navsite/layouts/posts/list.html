{{ define "main" }}
{{ $p := .Paginate .Pages 10 }}

<section class="panel blog">
  <header class="blog__header">
    <h1 class="blog__title">{{ .Title }}</h1>
    {{ with .Params.summary }}<p class="blog__subtitle">{{ . }}</p>{{ end }}
  </header>

  <div class="blog-list">
    {{ range $p.Pages }}
      <article class="blog-item">
        <div class="blog-item__meta">
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "2006-01-02" }}</time>
          {{ with .Params.tags }}
            <span class="blog-item__tags">
              {{ range first 4 . }}<span class="tag-badge">{{ . }}</span>{{ end }}
            </span>
          {{ end }}
        </div>
        <h2 class="blog-item__title">
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        </h2>
        {{ with .Params.summary }}
          <p class="blog-item__summary">{{ . }}</p>
        {{ else }}
          {{ with .Summary }}<p class="blog-item__summary">{{ . | plainify | truncate 220 }}</p>{{ end }}
        {{ end }}
        <div class="blog-item__more">
          <a class="ghost-link" href="{{ .RelPermalink }}">阅读全文</a>
        </div>
      </article>
    {{ end }}
  </div>

  {{ if gt $p.TotalPages 1 }}
    <nav class="blog-pagination" aria-label="Pagination">
      {{ if $p.HasPrev }}<a class="ghost-link" href="{{ $p.Prev.URL }}">上一页</a>{{ end }}
      <span class="blog-pagination__info">第 {{ $p.PageNumber }} / {{ $p.TotalPages }} 页</span>
      {{ if $p.HasNext }}<a class="ghost-link" href="{{ $p.Next.URL }}">下一页</a>{{ end }}
    </nav>
  {{ end }}
</section>
{{ end }}


